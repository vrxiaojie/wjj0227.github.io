---
title: 2021-07-24-小米8刷入Win11
tags: text
renderNumberedHeading: true
grammar_cjkRuby: true
---

# 一、准备工作  
## 1、PE镜像：[pe 密码1234](https://pan.adycloud.com/s/aOWuO){:target="_blank"}    
## 2、dism++：[dism++](http://www.chuyu.me/zh-Hans/index.html){:target="_blank"}      
## 3、SDM845驱动：[SDM845驱动](https://github.com/edk2-porting/WOA-Drivers){:target="_blank"}       
## 4、win11 arm64 iso:[UUP Dump](https://uupdump.net/?lang=zh-cn){:target="_blank"}      
## 5、UEFI：[uefi](https://github.com/edk2-porting/edk2-sdm845/releases){:target="_blank"}      
## 6、parted  ：[parted](https://wwa.lanzoui.com/izy3qrsd8ab){:target="_blank"}  
## 7、一键TWRP（wzsx150制作）：[TWRP](https://wwa.lanzoui.com/icFdWrsd98f){:target="_blank"}  
## 8、最重要！ 小米8  64G 安卓10（需要最新的开发版）
## 9、usb hub 来连接多个usb设备  


----------
# 二、刷入TWRP+boot签名+复制文件
### 1、手机进入fastboot，连接电脑，使用一键刷入bat文件  
### 2、进入twrp后，高级--签名boot （防止重启掉rec）
### 3、将parted 文件复制到手机根目录


----------

# 三、分区  
### 1、分区（仅限64G 小米8） 
进入TWRP
以下内容一行一行地复制
``` 
cp /sdcard/parted /sbin/ && chmod 755 /sbin/parted
umount /data && umount /sdcard
parted /dev/block/sda
rm 21 #21是userdata分区号
mkpart esp fat32 1611MB 2100MB
mkpart pe fat32 2100MB 5100MB
mkpart win ntfs 5100MB 35GB   #实测win系统会占用24GB
mkpart userdata ext4 35GB 59GB  
set 21 esp on  #设置21分区为esp分区
```
### 2、重启TWRP，格式化分区

``` 
mkfs.fat -F32 -s1 /dev/block/by-name/pe
mkfs.fat -F32 -s1 /dev/block/by-name/esp
mkfs.ntfs -f /dev/block/by-name/win
mke2fs -t ext4 /dev/block/by-name/userdata
```
### 3、挂载PE分区到 /mnt

``` 
ount /dev/block/by-name/pe /mnt
```
### 4、OTG连接U盘，复制pe文件到PE分区（需要插入键盘）

``` 
cp -r /usbstorage/20h2pe_new/* /mnt
```
### 5、使用TWRP直接重启进入fastboot！一定不要进安卓


----------

# 四、安装win11
## 1、boot uefi
